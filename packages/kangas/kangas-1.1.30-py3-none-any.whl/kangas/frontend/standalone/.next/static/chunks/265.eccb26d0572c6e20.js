"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{265:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(1799),i=t(9396),o=t(9534),u=t(5893),s=t(7294),l=t(5152),a=t.n(l),c=t(7625),d=t(5503),f=t(813),v=t(828),m=t(9815),Z=t(883),h=t(1590),p=t(887),g=t(2339),x=t(5587),y=t(4285),j=function(e){var n=(0,i.Z)((0,r.Z)({},e.innerProps),{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}}),t=(0,x.nB)({id:e.data.id}),o=t.attributes,s=t.listeners,l=t.setNodeRef,a=t.transform,c=t.transition,d={transform:y.ux.Transform.toString(a),transition:c};return(0,u.jsx)("div",(0,i.Z)((0,r.Z)({style:d,ref:l},o,s),{children:(0,u.jsx)(h.c.MultiValue,(0,i.Z)((0,r.Z)({},e),{innerProps:n}))}))},b=function(e){var n=(0,p.Zj)({id:"droppable"}),t=n.isOver,i=n.setNodeRef,o={color:t?"green":void 0};return(0,u.jsx)("div",{style:o,ref:i,children:(0,u.jsx)(h.c.MultiValueContainer,(0,r.Z)({},e))})},C=function(e){return(0,u.jsx)(h.c.MultiValueRemove,(0,i.Z)((0,r.Z)({},e),{innerProps:(0,r.Z)({onPointerDown:function(e){return e.stopPropagation()}},e.innerProps)}))},M=function(e){return(0,u.jsx)(h.c.Menu,(0,r.Z)({className:"react-select-list"},e))},B=function(e){var n=e.options,t=e.update,o=e.defaults,l=(0,v.Z)(s.useState(n),2),a=l[0],c=l[1],d=(0,s.useCallback)((function(){return t(a)}),[a]),f={valueContainer:function(e,n){return(0,i.Z)((0,r.Z)({},e),{overflow:"auto"})}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p.LB,{modifiers:[g.F4],onDragEnd:function(e){var n=e.active,t=e.over;n&&t&&c((function(e){var r=e.findIndex((function(e){return e.id===n.id})),i=e.findIndex((function(e){return e.id===t.id}));return(0,x.Rp)(e,r,i)}))},children:(0,u.jsx)(x.Fo,{items:a,strategy:x.PG,children:(0,u.jsx)(Z.default,{styles:f,distance:4,isMulti:!0,options:o,value:a,onChange:function(e){return c((0,m.Z)(e))},components:{MultiValue:j,MultiValueContainer:b,MultiValueRemove:C,Menu:M},closeMenuOnSelect:!1})})}),(0,u.jsx)("button",{onClick:d,children:"Save Changes"})]})},k=function(e,n,t){return function(e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").trim();if(!t.length)return(0,r.Z)({},e,n);var i=t.match(/([^[.\]])+/g);return i.reduce((function(e,t,r){return void 0===e[t]&&(e[t]={}),r===i.length-1&&(e[t]=n),e[t]}),e),e}((0,r.Z)({},e),n,t)},D=a()((function(){return Promise.resolve().then(t.bind(t,883))}),{ssr:!1}),N=function(e){var n=e.toggle,t=e.sortDesc;return(0,u.jsxs)("div",{className:"arrow-toggle",onClick:n,children:[t&&(0,u.jsx)(d.Z,{}),!t&&(0,u.jsx)(f.Z,{})]})},S=function(e){var n=e.columns,t=e.query,l=e.defaultOptions,a=e.subtree,d=void 0===a?"":a,f=e.isMulti,v=void 0!==f&&f,m=e.subtrees,Z=void 0===m?[]:m,h=(0,c.unstable_useRefreshRoot)(),p=(0,s.useState)(!1),g=(p[0],p[1],(0,s.useState)(null)),x=(g[0],g[1],(0,s.useState)(!1)),y=(x[0],x[1],(0,s.useState)(!1)),j=y[0],b=(y[1],(0,s.useMemo)((function(){return n.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[n])),C=(0,s.useMemo)((function(){return null===l||void 0===l?void 0:l.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[l]),M=(0,s.useMemo)((function(){var e=t[d]||t[Z[0]];return b.find((function(n){return n.value===e}))||null}),[b,t]),S=(0,s.useCallback)((function(e){var n=e.map((function(e){return e.value}));h({query:k(t,"",{select:n})})}),[t]),P=(0,s.useCallback)((function(e){var n=e.value;if(Z.length){var u=(0,i.Z)((0,r.Z)({},t),{sortDesc:j}),s=!0,l=!1,a=void 0;try{for(var c,f=Z[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var v=c.value;u=k(u,v,n)}}catch(g){l=!0,a=g}finally{try{s||null==f.return||f.return()}finally{if(l)throw a}}if(null===u||void 0===u?void 0:u.groupBy){u.limit,u.offset;var m=(0,o.Z)(u,["limit","offset"]);u=(0,i.Z)((0,r.Z)({},m),{limit:4})}else{u.limit,u.offset;var p=(0,o.Z)(u,["limit","offset"]);u=(0,i.Z)((0,r.Z)({},p),{limit:10})}h({query:u})}else h({query:k(t,d,n)})}),[Z,d,t,j]),R=(0,s.useCallback)((function(){var e=(0,r.Z)({},t);if("groupBy"===d||"groupBy"==Z[0]){e.groupBy,e.sortBy;var n=(0,o.Z)(e,["groupBy","sortBy"]);e=(0,i.Z)((0,r.Z)({},n),{limit:10})}else if("sortBy"===d||"sortBy"==Z[0]){e.sortBy;e=(0,o.Z)(e,["sortBy"])}h({query:e})}),[t,d,Z]),w=(0,s.useCallback)((function(){h({query:(0,i.Z)((0,r.Z)({},t),{sortDesc:!(null===t||void 0===t?void 0:t.sortDesc)})})}),[t]);return v?(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"alert",children:"You can drag and drop columns to sort them in the DataGrid"}),(0,u.jsx)(B,{options:b,update:S,defaults:C})]}):(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"select-modal-title",children:[(0,u.jsx)("div",{children:"Select a column"}),(0,u.jsx)("div",{className:"reset-button ".concat(M?"enabled":"disabled"),onClick:R,children:"Reset to default"})]}),(0,u.jsxs)("div",{className:"select-modal-body",children:[(0,u.jsx)(D,{options:b,value:M,onChange:P}),!!(null===t||void 0===t?void 0:t.sortBy)&&(0,u.jsx)(N,{toggle:w,sortDesc:null===t||void 0===t?void 0:t.sortDesc})]})]})}}}]);