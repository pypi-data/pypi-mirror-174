{"version":3,"file":"dateInlineEditorViewTests.js","names":["suite","initialDate","view","$container","beforeEach","$","appendTo","$testsScratch","describe","it","RB","DateInlineEditorView","el","render","expect","options","descriptorText","toBe","minDate","maxDate","rawValue","$buttons","length","$field","children","firstElementChild","outerHTML","firstChild","textContent","afterEach","hideEditor","startEdit","tagName","undefined","value","setValue","save","$el","innerHTML","spyOn","trigger","_scheduleUpdateDirtyState","toHaveBeenCalled"],"sources":["../../../../../../../static/rb/js/ui/views/tests/dateInlineEditorViewTests.es6.js"],"sourcesContent":["suite('rb/ui/views/DateInlineEditorView', function() {\n    const initialDate = '2022-09-16';\n    let view;\n    let $container;\n\n    beforeEach(function() {\n        $container = $('<div/>').appendTo($testsScratch);\n    });\n\n    describe('Construction', function() {\n        it('Default', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe(null);\n            expect(view.options.minDate).toBe(null);\n            expect(view.options.maxDate).toBe(null);\n            expect(view.options.rawValue).toBe(null);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n            expect(view.$field[0].children.length).toBe(1);\n            expect(view.$field[0].firstElementChild.outerHTML)\n                .toBe('<input type=\"date\">');\n\n        });\n\n        it('With options provided', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n                rawValue: initialDate,\n                descriptorText: 'Test',\n                minDate: '2020-10-10',\n                maxDate: '2030-10-10',\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe('Test');\n            expect(view.options.minDate).toBe('2020-10-10');\n            expect(view.options.maxDate).toBe('2030-10-10');\n            expect(view.options.rawValue).toBe(initialDate);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n            expect(view.$field[0].firstChild.textContent).toBe('Test');\n            expect(view.$field[0].firstElementChild.outerHTML).toBe(\n                '<input type=\"date\" max=\"2030-10-10\" min=\"2020-10-10\">');\n\n        });\n    });\n\n    describe('Operations', function() {\n        afterEach(function() {\n            view.hideEditor();\n        });\n\n        describe('startEdit', function() {\n            it('With an initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstElementChild.tagName).toBe('INPUT');\n                expect(view.$field[0].firstElementChild.value).toBe(initialDate);\n            });\n\n            it('With no initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstElementChild.tagName).toBe('INPUT');\n                expect(view.$field[0].firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstChild.textContent).toBe('Test');\n                expect(view.$field[0].firstElementChild.value).toBe('');\n            });\n        });\n\n        describe('save', function() {\n            it('With a new date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue(initialDate);\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe(initialDate);\n            });\n\n            it('With an empty value', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue('');\n                view.save();\n\n                expect(view.options.rawValue).toBe('');\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n\n            it('Without any changes made', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n        });\n    });\n\n    describe('Events', function() {\n        it('On change', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n\n            spyOn(view, '_scheduleUpdateDirtyState');\n\n            view.render();\n            view.$field.trigger('change');\n\n            expect(view._scheduleUpdateDirtyState)\n                .toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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"}