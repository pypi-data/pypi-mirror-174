(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{42953:function(e,t,n){"use strict";var r=n(50029),a=n(87794),s=n.n(a),i=n(1396),o=n(43894),c=n(82175),u=n(1272),l=n(96016),d=n(65698),f=n(85893),p={yaml:""};t.Z=function(e){var t=e.description,n=e.submitButtonText,a=e.onCreate,h=e.onSuccess,m=function(){var e=(0,r.Z)(s().mark((function e(t,n){var r,i,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,i=u.ZP.load(t.yaml,{json:!0}),e.next=4,a(i);case 4:"error"in(o=e.sent)?(c=(0,d.e$)(o.error),r({yaml:c})):"data"in o&&h(o.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,f.jsx)(c.J9,{initialValues:p,validate:function(e){try{if(!u.ZP.load(e.yaml,{json:!0}))return{yaml:"Could not parse the supplied YAML"}}catch(t){return(0,d.FM)(t)?{yaml:"Could not parse the supplied YAML: \n\n".concat(t.message)}:{yaml:"Could not parse the supplied YAML"}}return{}},onSubmit:m,validateOnChange:!1,validateOnBlur:!1,children:function(e){var r=e.isSubmitting;return(0,f.jsxs)(c.l0,{children:[(0,f.jsx)(i.xv,{size:"sm",color:"gray.700",mb:4,children:t}),(0,f.jsx)(i.xu,{mb:4,whiteSpace:"pre-line",fontFamily:"Menlo",children:(0,f.jsx)(l.Ks,{name:"yaml",textAreaProps:{fontWeight:400,lineHeight:"150%",color:"gray.800",fontSize:"13px",height:"50vh",width:"100%",mb:"2"}})}),(0,f.jsx)(o.zx,{size:"sm",colorScheme:"primary",type:"submit",disabled:r,"data-testid":"submit-yaml-btn",children:n})]})}})}},58144:function(e,t,n){"use strict";var r=n(23296),a=n(1396),s=n(43894),i=n(85893);t.Z=function(e){var t=e.isOpen,n=e.onClose,o=e.onConfirm,c=e.title,u=e.message;return(0,i.jsxs)(r.u_,{isOpen:t,onClose:n,size:"lg",children:[(0,i.jsx)(r.ZA,{}),(0,i.jsxs)(r.hz,{textAlign:"center",p:2,"data-testid":"confirmation-modal",children:[(0,i.jsx)(r.xB,{fontWeight:"medium",children:c}),(0,i.jsx)(r.fe,{children:u}),(0,i.jsx)(r.mz,{children:(0,i.jsxs)(a.MI,{columns:2,width:"100%",children:[(0,i.jsx)(s.zx,{variant:"outline",mr:3,onClick:n,"data-testid":"cancel-btn",children:"Cancel"}),(0,i.jsx)(s.zx,{colorScheme:"primary",onClick:o,"data-testid":"continue-btn",children:"Continue"})]})})]})]})}},10846:function(e,t,n){"use strict";n.d(t,{t:function(){return d},V:function(){return f}});var r=n(59499),a=n(1396),s=n(85893);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.message;return(0,s.jsxs)(a.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.message;return(0,s.jsxs)(a.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(c,{message:e});return o(o({},l),{description:t})},f=function(e){var t=(0,s.jsx)(u,{message:e});return o(o({},l),{description:t,status:"error"})}},5353:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(1396),a=n(77336),s=n(43894),i=n(41664),o=n(67294),c=n(13275),u=n(59499),l=n(50029),d=n(16835),f=n(87794),p=n.n(f),h=n(30437),m=n(82175),b=n(11163),y=n(2185),x=n(74231),g=n(58144),v=n(65028),E=n(96016),j=n(65698),O=n(47346),C=n(10846),S=n(70889),T=n(17451),A=n(29112),I=n(85893);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){return!("system_type"in e)},P={url:"",classify:!1,classifyConfirmed:!1},R=x.Ry().shape({url:x.Z_().required().label("Database URL"),classify:x.O7(),classifyConfirmed:x.O7().when(["url","classify"],{is:function(e,t){return e&&t},then:x.O7().equals([!0])})}),N=function(){var e=(0,A.pR)(),t=(0,d.Z)(e,2),n=t[0],a=t[1].isLoading,i=(0,A.IR)(),o=(0,d.Z)(i,2),c=o[0],u=o[1].isLoading,f=(0,O.Du)(),x=(0,d.Z)(f,2),L=x[0],N=x[1].isLoading,D=a||u||N,k=(0,h.pm)(),U=(0,b.useRouter)(),B=(0,v.h)(),Z=(0,y.I0)(),z=function(){var e=(0,l.Z)(p().mark((function e(t){var r,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({organization_key:S.Av,generate:{config:{connection_string:t.url},target:T.GC.DB,type:T.j.DATASETS}});case 2:if(!("error"in(a=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,j.e$)(a.error)});case 5:if((s=(null!==(r=a.data.generate_results)&&void 0!==r?r:[]).filter(_))&&s.length>0){e.next=8;break}return e.abrupt("return",{error:"Unable to generate a dataset with this connection."});case 8:return e.abrupt("return",{datasets:s});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:if(!("error"in(n=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,j.e$)(n.error)});case 5:return e.abrupt("return",{dataset:n.data});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,l.Z)(p().mark((function e(t){var n,r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.values,r=t.datasets,e.next=3,L({dataset_schemas:r.map((function(e){var t=e.name;return{fides_key:e.fides_key,name:t}})),schema_config:{organization_key:S.Av,generate:{config:{connection_string:n.url},target:T.GC.DB,type:T.j.DATASETS}}});case 3:if(!("error"in(a=e.sent))){e.next=6;break}return e.abrupt("return",{error:(0,j.e$)(a.error)});case 6:return e.abrupt("return",{classifyInstances:a.data.classify_instances});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,l.Z)(p().mark((function e(t){var n,r,a,s,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:if(!("error"in(r=e.sent))){e.next=6;break}return k((0,C.V)(r.error)),e.abrupt("return");case 6:return e.next=8,Promise.all(r.datasets.map((function(e){return M(e)})));case 8:if(a=e.sent,!("error"in(s=null!==(n=a.find((function(e){return"error"in e})))&&void 0!==n?n:a[0]))){e.next=13;break}return k((0,C.V)(s.error)),e.abrupt("return");case 13:if(t.classify){e.next=17;break}return k((0,C.t)("Generated ".concat(s.dataset.name," dataset"))),U.push("/dataset/".concat(s.dataset.fides_key)),e.abrupt("return");case 17:return e.next=19,G({values:t,datasets:r.datasets});case 19:if(!("error"in(i=e.sent))){e.next=23;break}return k((0,C.V)(i.error)),e.abrupt("return");case 23:k((0,C.t)("Generate and classify are now in progress")),Z((0,A.Zl)(s.dataset.fides_key)),U.push("/dataset");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,I.jsx)(m.J9,{initialValues:w(w({},P),{},{classify:B.plus}),validationSchema:R,onSubmit:Y,validateOnChange:!1,validateOnBlur:!1,children:function(e){var t=e.isSubmitting,n=e.errors,a=e.values,i=e.submitForm,o=e.resetForm,c=e.setFieldValue;return(0,I.jsxs)(m.l0,{children:[(0,I.jsxs)(r.gC,{spacing:8,align:"left",children:[(0,I.jsx)(r.xv,{size:"sm",color:"gray.700",children:"Connect to one of your databases using a connection URL. You may have received this URL from a colleague or your Ethyca developer support engineer."}),(0,I.jsx)(r.xu,{children:(0,I.jsx)(E.j0,{name:"url",label:"Database URL"})}),B.plus?(0,I.jsx)(E.w8,{name:"classify",label:"Classify dataset",tooltip:"In addition to generating the Dataset, Fidescls will scan the database to determine the locations of possible PII and suggest labels based on the contents of your tables."}):null,(0,I.jsx)(r.xu,{children:(0,I.jsx)(s.zx,{size:"sm",colorScheme:"primary",type:"submit",isLoading:t||D,isDisabled:t||D,"data-testid":"create-dataset-btn",children:"Generate dataset"})})]}),(0,I.jsx)(g.Z,{title:"Generate and classify this dataset",message:"You have chosen to generate and classify this dataset. This process may take several minutes. In the meantime you can continue using Fides. You will receive a notification when the process is complete.",isOpen:void 0!==n.classifyConfirmed,onClose:function(){o({values:w(w({},a),{},{classifyConfirmed:!1})})},onConfirm:function(){c("classifyConfirmed",!0),setTimeout((function(){i()}),0)}})]})}})},D=n(42953);var k=function(){var e=(0,A.IR)(),t=(0,d.Z)(e,1)[0],n=(0,h.pm)(),r=(0,b.useRouter)(),a=function(){var e=(0,l.Z)(p().mark((function e(n){var r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===typeof(s=n)&&null!=s&&"dataset"in s&&Array.isArray(s.dataset)?(a=(0,d.Z)(n.dataset,1),r=a[0]):r=n,e.abrupt("return",t(r));case 2:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,I.jsx)(D.Z,{description:"Get started creating your first dataset by pasting your dataset yaml below! You may have received this yaml from a colleague or your Ethyca developer support engineer.",submitButtonText:"Create dataset",onCreate:a,onSuccess:function(e){n((0,C.t)("Successfully loaded new dataset YAML")),(0,A.Zl)(e.fides_key),r.push("/dataset/".concat(e.fides_key))}})},U=function(){var e=(0,o.useState)(null),t=e[0],n=e[1];return(0,I.jsxs)(c.Z,{title:"Datasets",children:[(0,I.jsx)(r.X6,{mb:2,fontSize:"2xl",fontWeight:"semibold",children:"Datasets"}),(0,I.jsx)(r.xu,{mb:8,children:(0,I.jsxs)(a.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,I.jsx)(a.gN,{children:(0,I.jsx)(i.default,{href:"/dataset",children:"Datasets"})}),(0,I.jsx)(a.gN,{children:(0,I.jsx)(i.default,{href:"#",children:"Create new dataset"})})]})}),(0,I.jsxs)(r.Kq,{spacing:8,children:[(0,I.jsx)(r.xu,{w:{base:"100%",lg:"50%"},children:(0,I.jsx)(r.xv,{children:"Choose whether to upload a new dataset YAML, connect to a database using a connection URL or manually generate a dataset."})}),(0,I.jsxs)(r.xu,{children:[(0,I.jsx)(s.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return n("yaml")},isActive:"yaml"===t,"data-testid":"upload-yaml-btn",children:"Upload a new dataset YAML"}),(0,I.jsx)(s.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return n("database")},isActive:"database"===t,"data-testid":"connect-db-btn",children:"Connect a database using a connection URL"}),(0,I.jsx)(s.zx,{size:"sm",variant:"outline",disabled:!0,children:"Manually generate a dataset"})]}),(0,I.jsxs)(r.xu,{w:{base:"100%",lg:"50%"},children:["yaml"===t?(0,I.jsx)(k,{}):null,"database"===t?(0,I.jsx)(N,{}):null]})]})]})}},17451:function(e,t,n){"use strict";var r,a,s,i,o,c,u,l,d,f,p,h,m,b;n.d(t,{Wg:function(){return r},y5:function(){return a},ts:function(){return s},j:function(){return c},jX:function(){return u},cc:function(){return l},pj:function(){return f},GC:function(){return b}}),function(e){e.CREATED="Created",e.PROCESSING="Processing",e.COMPLETE="Complete",e.FAILED="Failed",e.REVIEWED="Reviewed"}(r||(r={})),function(e){e.CONTROLLER="Controller",e.PROCESSOR="Processor",e.SUB_PROCESSOR="Sub-Processor"}(a||(a={})),function(e){e.INFORMED="Informed",e.ACCESS="Access",e.RECTIFICATION="Rectification",e.ERASURE="Erasure",e.PORTABILITY="Portability",e.RESTRICT_PROCESSING="Restrict Processing",e.WITHDRAW_CONSENT="Withdraw Consent",e.OBJECT="Object",e.OBJECT_TO_AUTOMATED_PROCESSING="Object to Automated Processing"}(s||(s={})),function(e){e.INIT="init",e.RESET="reset"}(i||(i={})),function(e){e.GRAPHS="graphs",e.TEXT="text"}(o||(o={})),function(e){e.SYSTEMS="systems",e.DATASETS="datasets"}(c||(c={})),function(e){e.ALL="ALL",e.EXCLUDE="EXCLUDE",e.INCLUDE="INCLUDE",e.NONE="NONE"}(u||(u={})),function(e){e.CONSENT="Consent",e.CONTRACT="Contract",e.LEGAL_OBLIGATION="Legal Obligation",e.VITAL_INTEREST="Vital Interest",e.PUBLIC_INTEREST="Public Interest",e.LEGITIMATE_INTERESTS="Legitimate Interests"}(l||(l={})),function(e){e.ANY="ANY",e.ALL="ALL",e.NONE="NONE",e.OTHER="OTHER"}(d||(d={})),function(e){e.CONSENT="Consent",e.EMPLOYMENT="Employment",e.VITAL_INTERESTS="Vital Interests",e.NON_PROFIT_BODIES="Non-profit Bodies",e.PUBLIC_BY_DATA_SUBJECT="Public by Data Subject",e.LEGAL_CLAIMS="Legal Claims",e.SUBSTANTIAL_PUBLIC_INTEREST="Substantial Public Interest",e.MEDICAL="Medical",e.PUBLIC_HEALTH_INTEREST="Public Health Interest"}(f||(f={})),function(e){e.FAIL="FAIL",e.PASS="PASS"}(p||(p={})),function(e){e.SUCCESS="success",e.FAILURE="failure"}(h||(h={})),function(e){e.AWS="aws",e.OKTA="okta",e.BIGQUERY="bigquery"}(m||(m={})),function(e){e.AWS="aws",e.DB="db",e.OKTA="okta",e.BIGQUERY="bigquery"}(b||(b={}))},89631:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/new",function(){return n(5353)}])}},function(e){e.O(0,[731,785,636,437,906,175,853,589,296,502,275,80,774,888,179],(function(){return t=89631,e(e.s=t);var t}));var t=e.O();_N_E=t}]);