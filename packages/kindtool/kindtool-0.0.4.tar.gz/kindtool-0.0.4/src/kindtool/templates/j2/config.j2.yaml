# generated by kindtool: {{kindtool_version}}
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
{% if internal_registry -%}
containerdConfigPatches:
- |-
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors."localhost:{{ internal_registry_docker_port }}"]
    endpoint = ["http://{{ internal_registry_docker_name }}:5000"]
{% endif -%}
{% if api_server_address -%}
networking:
  apiServerAddress: "{{ api_server_address }}"
{% if api_server_port -%}
# static port
  apiServerPort: {{ api_server_port }}
{% endif -%}
{% endif -%}
nodes:
{% include 'j2/controller.j2.yaml' -%}
{% if worker_nodes > 0 -%}
{% include 'j2/workers.j2.yaml' -%}
{% endif -%}
